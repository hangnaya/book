{% extends 'customer/base.html' %}
{% load my_filters %}
{% block content %}

<!-- Content -->
<div class="slider">
    <div id="carouselExampleCaptions" class="carousel slide" data-bs-interval="false">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="0" class="active" aria-current="true" aria-label="Slide 1"></button>
            <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="1" aria-label="Slide 2"></button>
            <button type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide-to="2" aria-label="Slide 3"></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="app/media/banner/banner1.png" class="d-block w-100" alt="...">
                <div class="carousel-caption d-none d-md-block">
                    {% comment %} <h3>Sale off 50%</h3>
                    <p>Some representative placeholder content for the first slide.</p> {% endcomment %}
                    {% comment %} <button class="carousel-btn btn btn-outline-primary">Buy now</button> {% endcomment %}
                </div>
            </div>
            <div class="carousel-item">
                <img src="app/media/banner/banner2.png" class="d-block w-100" alt="...">
                <div class="carousel-caption d-none d-md-block">
                    {% comment %} <h5>Second slide label</h5>
                    <p>Some representative placeholder content for the second slide.</p> {% endcomment %}
                </div>
            </div>
            <div class="carousel-item">
                <img src="app/media/banner/banner3.png" class="d-block w-100" alt="...">
                <div class="carousel-caption d-none d-md-block">
                    {% comment %} <h5>Third slide label</h5>
                    <p>Some representative placeholder content for the third slide.</p> {% endcomment %}
                </div>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="prev">
            <i class="carousel-control-btn fa-solid fa-angle-left"></i>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleCaptions" data-bs-slide="next">
            <i class="carousel-control-btn fa-solid fa-angle-right"></i>
            <span class="visually-hidden">Next</span>
        </button>
    </div>

    <!-- Sale -->
     <div class="flash-sale">
        <div class="container my-3 p-3">
            <div class="title-prod d-flex justify-content-between">
                 <svg xmlns="http://www.w3.org/2000/svg" width="128.703" height="26" viewBox="0 0 128.703 26"><defs><style>.a{fill:#f63b2f;}.b{fill:#f6a500;fill-rule:evenodd;}</style></defs><g transform="translate(-198.101 -242.184)"><path class="a" d="M201.422,245.06h10.072l-.66,3.671h-6.487l-.7,3.9h5.32l-.614,3.389H203l-1.3,7.136H198.1Z" transform="translate(0 1.077)"/><path class="a" d="M210.254,245.06h3.606L211.2,259.484h7.059l-.66,3.67H206.933Z" transform="translate(1.999 1.077)"/><path class="a" d="M223.63,245.06H226.9l2.024,18.094h-3.694L224.9,259.1h-4.442l-1.781,4.052h-3.716Zm1.208,11.162-.438-6.4-2.859,6.4Z" transform="translate(5.155 1.077)"/><path class="a" d="M241.813,245.06h3.606l-1.3,7.008h5.652l1.3-7.008h3.606l-3.321,18.094H247.75l1.363-7.416h-5.652l-1.363,7.416h-3.606Z" transform="translate(12.717 1.077)"/><path class="a" d="M259.171,263.366a9.293,9.293,0,0,1-3.234-.584,8.011,8.011,0,0,1-2.725-1.652l2.243-3.634a1.83,1.83,0,0,0,.429.483,5.669,5.669,0,0,0,.989.712,7.907,7.907,0,0,0,1.4.635,4.911,4.911,0,0,0,1.648.279,2.053,2.053,0,0,0,1.5-.445,1.573,1.573,0,0,0,.44-1.156,1.1,1.1,0,0,0-.242-.724,2.365,2.365,0,0,0-.671-.534,7.419,7.419,0,0,0-.99-.458c-.374-.145-.774-.3-1.2-.47a6.371,6.371,0,0,1-2.365-1.549,3.507,3.507,0,0,1-.779-2.389,7.183,7.183,0,0,1,.572-2.925,6.531,6.531,0,0,1,1.508-2.172,6.61,6.61,0,0,1,2.141-1.349,6.825,6.825,0,0,1,2.486-.47,6.218,6.218,0,0,1,1.516.18,8.234,8.234,0,0,1,1.365.458,7.9,7.9,0,0,1,1.177.634q.538.357.979.712l-2.2,3.457a1.7,1.7,0,0,0-.362-.381,6.032,6.032,0,0,0-.826-.583,6.346,6.346,0,0,0-1.144-.534,3.777,3.777,0,0,0-1.3-.23,2.066,2.066,0,0,0-1.44.47,1.68,1.68,0,0,0-.517,1.309,1.192,1.192,0,0,0,.682,1.107,15.159,15.159,0,0,0,1.935.824,12.145,12.145,0,0,1,1.528.674,4.753,4.753,0,0,1,1.187.878,3.46,3.46,0,0,1,.759,1.195,4.523,4.523,0,0,1,.264,1.625,7.115,7.115,0,0,1-.6,3.063,5.758,5.758,0,0,1-1.559,2.046,6.183,6.183,0,0,1-2.177,1.144A8.514,8.514,0,0,1,259.171,263.366Z" transform="translate(20.503 1.041)"/><path class="a" d="M270.756,245.06h3.277l2.023,18.094h-3.694l-.33-4.052H267.59l-1.78,4.052h-3.718Zm1.21,11.162-.438-6.4-2.859,6.4Z" transform="translate(23.957 1.077)"/><path class="a" d="M276.645,245.06h3.606l-2.661,14.424h7.059l-.66,3.67H273.324Z" transform="translate(27.507 1.077)"/><path class="a" d="M285.653,245.06h10.271l-.682,3.671h-6.665l-.638,3.517h5.718l-.616,3.389h-5.717l-.726,3.847h6.861l-.66,3.67H282.332Z" transform="translate(30.88 1.077)"/><path class="b" d="M235.17,252.3,241,254.353a.635.635,0,0,1,.366.776.651.651,0,0,1-.109.216l-11.471,12.679a.56.56,0,0,1-.9-.637l3.716-9.841-5.374-1.486a.593.593,0,0,1-.346-.726.582.582,0,0,1,.155-.264L238.5,242.38a.478.478,0,0,1,.722-.059.61.61,0,0,1,.118.7Z" transform="translate(8.967 0)"/></g></svg>
                <a href="/list-product" class="product-more">
                    Xem tất cả
                    <i class="fa-solid fa-angle-right"></i>
                </a>
            </div>
            <div class="swiper-theme-container">
                <div class="swiper swiper-3">
                    <div class="swiper-wrapper d-flex">
                        {% for product in top_sale_products %}
                        <div class="swiper-slide">
                            <a class="product" href="/product/{{product.product_id}}">
                                <div class="product-card">
                                    <div class="product-image">
                                        <img src="{{product.productimage_set.first.name.url}}" alt="" class="product-img">
                                    </div>
                                    <div class="product-name" data-toggle="tooltip" title="{{product.name}}">{{product.name}}</div>
                                    <div class="product-price">
                                        <div class="product-price-sale color-red">
                                            {% if product.sale > 0 %}
                                                {{product.sale|floatformat:0|intcomma_dot}} đ
                                            {% else %}
                                                {{product.price|floatformat:0|intcomma_dot}} đ
                                            {% endif %}
                                        </div>
                                        {% if product.sale > 0 %}
                                            <div class="product-price-original">{{product.price|floatformat:0|intcomma_dot}} đ</div>
                                        {% endif %}
                                    </div>
                                    <div class="product-rate d-flex align-items-center">
                                        {% for i in 5|times %}
                                        {% if i <= product.rating %}
                                        <i class="fa-solid fa-star"></i>
                                        {% else %}
                                        <i class="fa-regular fa-star"></i>
                                        {% endif %}
                                        {% endfor %}
                                        <div class="product-quantity-sold ms-2">(Đã bán {{product.total_sold}})</div>
                                    </div>
                                </div>
                            </a>
    
                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="swiper-nav">
                    <div class="swiper-button-prev swiper-button-prev-3">
                        <i class="swiper-button-icon fa-solid fa-angle-left"></i>
                    </div>
                    <div class="swiper-button-next swiper-button-next-3">
                        <i class="swiper-button-icon fa-solid fa-angle-right"></i>
                    </div>
                </div>
            </div>
        </div>
     </div>
   
    <div class='container homepage'>

        {% if recommended_products %}
        <div class="products-slider mt-3 p-3">
            <div class="title-prod d-flex justify-content-between">
                <h4 class="title-group">
                    Có thể bạn sẽ thích
                </h4>
            </div>
            <div class="swiper-theme-container">
                <div class="swiper swiper-4">
                    <!-- Additional required wrapper -->
                    <div class="swiper-wrapper d-flex">
                        <!-- Slides -->
                        {% for product in recommended_products %}
                        <div class="swiper-slide">
                            <a class="product" href="/product/{{product.product_id}}">
                                <div class="product-card">
                                    <div class="product-image">
                                        <img src="{{product.productimage_set.first.name.url}}" alt="" class="product-img">
                                    </div>
                                    <div class="product-name" data-toggle="tooltip" title="{{product.name}}">{{product.name}}</div>
                                    <div class="product-price">
                                        <div class="product-price-sale color-red">
                                            {% if product.sale > 0 %}
                                                {{product.sale|floatformat:0|intcomma_dot}} đ
                                            {% else %}
                                                {{product.price|floatformat:0|intcomma_dot}} đ
                                            {% endif %}
                                        </div>
                                        {% if product.sale > 0 %}
                                            <div class="product-price-original">{{product.price|floatformat:0|intcomma_dot}} đ</div>
                                        {% endif %}
                                    </div>
                                    <div class="product-rate d-flex align-items-center">
                                        {% for i in 5|times %}
                                        {% if i <= product.rating %}
                                        <i class="fa-solid fa-star"></i>
                                        {% else %}
                                        <i class="fa-regular fa-star"></i>
                                        {% endif %}
                                        {% endfor %}
                                        <div class="product-quantity-sold ms-2">(Đã bán {{product.total_sold}})</div>
                                    </div>
                                </div>
                            </a>

                        </div>
                        {% endfor %}

                    </div>
                </div>
                <div class="swiper-nav">
                    <div class="swiper-button-prev swiper-button-prev-4">
                        <i class="swiper-button-icon fa-solid fa-angle-left"></i>
                    </div>
                    <div class="swiper-button-next swiper-button-next-4">
                        <i class="swiper-button-icon fa-solid fa-angle-right"></i>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}

        <div class="products-slider mt-3 p-3">
            <div class="title-prod d-flex justify-content-between">
                <h4 class="title-group">
                    <svg version="1.0" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" 
                    width="32px" height="32px" viewBox="0 0 64 64" enable-background="new 0 0 64 64" xml:space="preserve">
               <g>
                   <path fill="#F9EBB2" d="M56,62H10c-2.209,0-4-1.791-4-4s1.791-4,4-4h46V62z"/>
                   <g>
                       <path fill="#45AAB8" d="M6,4v49.537C7.062,52.584,8.461,52,10,52h2V2H8C6.896,2,6,2.896,6,4z"/>
                       <path fill="#45AAB8" d="M56,2H14v50h42h2v-2V4C58,2.896,57.104,2,56,2z"/>
                   </g>
                   <g>
                       <path fill="#394240" d="M60,52V4c0-2.211-1.789-4-4-4H8C5.789,0,4,1.789,4,4v54c0,3.313,2.687,6,6,6h49c0.553,0,1-0.447,1-1
                           s-0.447-1-1-1h-1v-8C59.104,54,60,53.104,60,52z M6,4c0-1.104,0.896-2,2-2h4v50h-2c-1.539,0-2.938,0.584-4,1.537V4z M56,62H10
                           c-2.209,0-4-1.791-4-4s1.791-4,4-4h46V62z M56,52H14V2h42c1.104,0,2,0.896,2,2v46v2H56z"/>
                       <path fill="#394240" d="M43,26H23c-0.553,0-1,0.447-1,1s0.447,1,1,1h20c0.553,0,1-0.447,1-1S43.553,26,43,26z"/>
                       <path fill="#394240" d="M49,20H23c-0.553,0-1,0.447-1,1s0.447,1,1,1h26c0.553,0,1-0.447,1-1S49.553,20,49,20z"/>
                       <path fill="#394240" d="M23,16h12c0.553,0,1-0.447,1-1s-0.447-1-1-1H23c-0.553,0-1,0.447-1,1S22.447,16,23,16z"/>
                   </g>
                   <path opacity="0.2" fill="#231F20" d="M6,4v49.537C7.062,52.584,8.461,52,10,52h2V2H8C6.896,2,6,2.896,6,4z"/>
               </g>
               </svg>                    Tủ sách nổi bật
                </h4>
                <a href="/list-product" class="product-more">
                    Xem tất cả
                    <i class="fa-solid fa-angle-right"></i>
                </a>
            </div>
            <div class="swiper-theme-container">
                <div class="swiper swiper-1">
                    <!-- Additional required wrapper -->
                    <div class="swiper-wrapper d-flex">
                        <!-- Slides -->
                        {% for product in top_selling_products %}
                        <div class="swiper-slide">
                            <a class="product" href="/product/{{product.product_id}}">
                                <div class="product-card">
                                    <div class="product-image">
                                        <img src="{{product.productimage_set.first.name.url}}" alt="" class="product-img">
                                    </div>
                                    <div class="product-name" data-toggle="tooltip" title="{{product.name}}">{{product.name}}</div>
                                    <div class="product-price">
                                        <div class="product-price-sale color-red">
                                            {% if product.sale > 0 %}
                                                {{product.sale|floatformat:0|intcomma_dot}} đ
                                            {% else %}
                                                {{product.price|floatformat:0|intcomma_dot}} đ
                                            {% endif %}
                                        </div>
                                        {% if product.sale > 0 %}
                                            <div class="product-price-original">{{product.price|floatformat:0|intcomma_dot}} đ</div>
                                        {% endif %}
                                    </div>
                                    <div class="product-rate d-flex align-items-center">
                                        {% for i in 5|times %}
                                        {% if i <= product.rating %}
                                        <i class="fa-solid fa-star"></i>
                                        {% else %}
                                        <i class="fa-regular fa-star"></i>
                                        {% endif %}
                                        {% endfor %}
                                        <div class="product-quantity-sold ms-2">(Đã bán {{product.total_sold}})</div>
                                    </div>
                                </div>
                            </a>

                        </div>
                        {% endfor %}

                    </div>
                </div>
                <div class="swiper-nav">
                    <div class="swiper-button-prev swiper-button-prev-1">
                        <i class="swiper-button-icon fa-solid fa-angle-left"></i>
                    </div>
                    <div class="swiper-button-next swiper-button-next-1">
                        <i class="swiper-button-icon fa-solid fa-angle-right"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="products-slider mt-3 p-3">
            <div class="title-prod d-flex justify-content-between">
                 <h4 class="title-group">
                    <svg width="32px" height="32px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21 7L13 15L9 11L3 17M21 7H15M21 7V13" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    Sản phẩm đang hot
                </h4>
                <a href="/list-product" class="product-more">
                    Xem tất cả
                    <i class="fa-solid fa-angle-right"></i>
                </a>
            </div>
            <div class="swiper-theme-container">
                <div class="swiper swiper-2">
                    <!-- Additional required wrapper -->
                    <div class="swiper-wrapper d-flex">
                        <!-- Slides -->
                        {% for product in hot_selling_products %}
                        <div class="swiper-slide">
                            <a class="product" href="/product/{{product.product_id}}">
                                <div class="product-card">
                                    <div class="product-image">
                                        <img src="{{product.productimage_set.first.name.url}}" alt="" class="product-img">
                                    </div>
                                    <div class="product-name" data-toggle="tooltip" title="{{product.name}}">{{product.name}}</div>
                                    <div class="product-price">
                                        <div class="product-price-sale color-red">
                                            {% if product.sale > 0 %}
                                                {{product.sale|floatformat:0|intcomma_dot}} đ
                                            {% else %}
                                                {{product.price|floatformat:0|intcomma_dot}} đ
                                            {% endif %}
                                        </div>
                                        {% if product.sale > 0 %}
                                            <div class="product-price-original">{{product.price|floatformat:0|intcomma_dot}} đ</div>
                                        {% endif %}
                                    </div>
                                    <div class="product-rate d-flex align-items-center">
                                        {% for i in 5|times %}
                                        {% if i <= product.rating %}
                                        <i class="fa-solid fa-star"></i>
                                        {% else %}
                                        <i class="fa-regular fa-star"></i>
                                        {% endif %}
                                        {% endfor %}
                                        <div class="product-quantity-sold ms-2">(Đã bán {{product.total_sold}})</div>
                                    </div>
                                </div>
                            </a>

                        </div>
                        {% endfor %}
                    </div>
                </div>
                <div class="swiper-nav">
                    <div class="swiper-button-prev swiper-button-prev-2">
                        <i class="swiper-button-icon fa-solid fa-angle-left"></i>
                    </div>
                    <div class="swiper-button-next swiper-button-next-2">
                        <i class="swiper-button-icon fa-solid fa-angle-right"></i>
                    </div>
                </div>
            </div>
        </div>

        <div class="welcome row align-items-center justify-content-center">
            <div class="col-sm-3">
                <img class="welcome-image" src="app/media/banner/library.png" alt="">
            </div>
            
            
            <div class="col-sm-9">
                <h6 class="welcome-title">NHÀ SÁCH TRỰC TUYẾN BOOKSTORE</h6>
                <p class="welcome-description">
                    Mua sách online tại nhà sách trực tuyến BookStore để được cập nhật nhanh nhất các tựa sách đủ thể loại với mức giảm 15 – 35% cùng nhiều ưu đãi, quà tặng kèm. Qua nhiều năm, không chỉ là địa chỉ tin cậy để bạn mua sách trực tuyến, Bookbuy còn có quà tặng, văn phòng phẩm, vật dụng gia đình,…với chất lượng đảm bảo, chủng loại đa dạng, chế độ bảo hành đầy đủ và giá cả hợp lý từ hàng trăm thương hiệu uy tín trong và ngoài nước. Đặc biệt, bạn có thể chọn những mẫu sổ tay handmade hay nhiều món quà tặng sinh nhật độc đáo chỉ có tại BookStore.
                </p>
                {% if not user.is_authenticated %}
                    <h6 class="welcome-description">Đăng kí <span>thành viên</span> ngay hôm nay</h6>
                    <a href="/login" class="btn btn-register">Đăng kí <i class="fa-solid fa-angle-right ms-2"></i></a>
                {% else %}
                    <h6 class="welcome-description">Khám phá các sản phẩm hot nhất</h6>
                    <a href="/list-product" class="btn btn-primary">Khám phá ngay <i class="fa-solid fa-angle-right ms-2"></i></a>
                {% endif %}
            </div>
            
        </div>
    </div>

    <script>
        $(document).ready(() => {
            list_swiper = [1, 2, 3, 4];
            list_swiper.forEach((item) => {
                var mySwiper = new Swiper(`.swiper-${item}`, {
                    slidesPerView: 1,
                    slidePerGroup: 1,
                    spaceBetween: 15,
                    loop: false,
                    breakpoints: {
                        400: {
                        slidesPerView: 2,
                        },
                        768: {
                        slidesPerView: 3,
                        },
                        991: {
                        slidesPerView: 4,
                        },
                        1200: {
                        slidesPerView: 5,
                        }
                    },
                    // Navigation arrows
                    navigation: {
                        nextEl: `.swiper-button-next-${item }`,
                        prevEl: `.swiper-button-prev-${item}`,
                    },
                });
            })
        })
    </script>

    {% endblock content %}